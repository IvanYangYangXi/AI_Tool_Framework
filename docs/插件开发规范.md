<!-- 
  DCCå·¥å…·ç®¡ç†æ¡†æ¶ - æ’ä»¶å¼€å‘è§„èŒƒ
  ç‰ˆæœ¬: 1.0.0
  æ›´æ–°æ—¥æœŸ: 2026-02-16
-->

# ğŸ”Œ æ’ä»¶å¼€å‘è§„èŒƒ

> æœ¬æ–‡æ¡£ä¸ºå¼€å‘è€…æä¾›å®Œæ•´çš„æ’ä»¶å¼€å‘æŒ‡å—ï¼ŒåŒ…å«æ¥å£è§„èŒƒã€ä»£ç æ¨¡æ¿å’Œæœ€ä½³å®è·µ

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [ç›®å½•ç»“æ„è§„èŒƒ](#ç›®å½•ç»“æ„è§„èŒƒ)
3. [é…ç½®æ–‡ä»¶è§„èŒƒ](#é…ç½®æ–‡ä»¶è§„èŒƒ)
4. [æ’ä»¶ä»£ç è§„èŒƒ](#æ’ä»¶ä»£ç è§„èŒƒ)
5. [æ‰§è¡Œæ¨¡å¼è¯´æ˜](#æ‰§è¡Œæ¨¡å¼è¯´æ˜)
6. [DCCé€šä¿¡æ¥å£](#dccé€šä¿¡æ¥å£)
7. [è‡ªåŠ¨åŒ–é›†æˆ](#è‡ªåŠ¨åŒ–é›†æˆ)
8. [å®Œæ•´ç¤ºä¾‹](#å®Œæ•´ç¤ºä¾‹)
9. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ¦‚è¿°

### ğŸ¯ æ’ä»¶ç±»å‹

| ç±»å‹ | typeå€¼ | target_dcc | è¯´æ˜ |
|------|--------|------------|------|
| Mayaæ’ä»¶ | `dcc` | `maya` | åœ¨Mayaä¸­æ‰§è¡Œçš„è„šæœ¬ |
| 3ds Maxæ’ä»¶ | `dcc` | `max` | åœ¨3ds Maxä¸­æ‰§è¡Œçš„è„šæœ¬ |
| Blenderæ’ä»¶ | `dcc` | `blender` | åœ¨Blenderä¸­æ‰§è¡Œçš„è„šæœ¬ |
| UEæ’ä»¶ | `ue_engine` | `unreal` | åœ¨Unreal Engineä¸­æ‰§è¡Œçš„è„šæœ¬ |
| é€šç”¨å·¥å…· | `other` | `other` | ç‹¬ç«‹è¿è¡Œçš„Pythonè„šæœ¬ |

### ğŸ”„ æ‰§è¡Œæ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| `standalone` | ç‹¬ç«‹è¿›ç¨‹æ‰§è¡Œ | ä¸ä¾èµ–DCCçš„é€šç”¨å·¥å…· |
| `dcc` | åœ¨DCCè½¯ä»¶ä¸­æ‰§è¡Œ | éœ€è¦è®¿é—®DCC APIçš„å·¥å…· |

---

## ç›®å½•ç»“æ„è§„èŒƒ

### ğŸ“ æ’ä»¶ç›®å½•ä½ç½®

```
src/plugins/
â”œâ”€â”€ dcc/                    # DCCè½¯ä»¶æ’ä»¶
â”‚   â”œâ”€â”€ maya/               # Mayaä¸“ç”¨
â”‚   â”œâ”€â”€ max/                # 3ds Maxä¸“ç”¨
â”‚   â””â”€â”€ blender/            # Blenderä¸“ç”¨
â”œâ”€â”€ ue/                     # Unreal Engineæ’ä»¶
â””â”€â”€ other/                  # é€šç”¨å·¥å…·
```

### ğŸ“‚ å•ä¸ªæ’ä»¶ç»“æ„

```
your_plugin_name/
â”œâ”€â”€ config.json             # å¿…é¡»ï¼šæ’ä»¶é…ç½®æ–‡ä»¶
â”œâ”€â”€ plugin.py               # å¿…é¡»ï¼šæ’ä»¶ä¸»ä»£ç 
â”œâ”€â”€ README.md               # å¯é€‰ï¼šä½¿ç”¨è¯´æ˜
â””â”€â”€ utils/                  # å¯é€‰ï¼šè¾…åŠ©æ¨¡å—
    â””â”€â”€ helper.py
```

---

## é…ç½®æ–‡ä»¶è§„èŒƒ

### ğŸ“ config.json å®Œæ•´æ ¼å¼

```json
{
  "plugin": {
    "name": "å·¥å…·æ˜¾ç¤ºåç§°",
    "version": "1.0.0",
    "type": "dcc | ue_engine | other",
    "target_dcc": "maya | max | blender | unreal | other",
    "min_version": "2022",
    "max_version": "2025",
    "description": "å·¥å…·åŠŸèƒ½çš„è¯¦ç»†æè¿°",
    "author": "ä½œè€…å",
    "entry_point": "plugin.py",
    "tags": ["modeling", "utility"]
  },
  "parameters": {
    "param_name": {
      "type": "string",
      "default": "default_value",
      "description": "å‚æ•°è¯´æ˜",
      "required": false
    }
  }
}
```

### ğŸ“‹ å­—æ®µè¯´æ˜

| å­—æ®µ | å¿…é¡» | ç±»å‹ | è¯´æ˜ |
|------|------|------|------|
| `name` | âœ… | string | å·¥å…·åœ¨GUIä¸­æ˜¾ç¤ºçš„åç§° |
| `version` | âœ… | string | ç‰ˆæœ¬å·ï¼Œæ¨èè¯­ä¹‰åŒ–ç‰ˆæœ¬ |
| `type` | âœ… | string | æ’ä»¶ç±»å‹ |
| `target_dcc` | âœ… | string | ç›®æ ‡DCCè½¯ä»¶ |
| `description` | âœ… | string | åŠŸèƒ½æè¿° |
| `author` | âŒ | string | ä½œè€…å |
| `entry_point` | âŒ | string | å…¥å£æ–‡ä»¶ï¼Œé»˜è®¤plugin.py |
| `tags` | âŒ | array | åˆ†ç»„æ ‡ç­¾ |
| `min_version` | âŒ | string | æœ€ä½DCCç‰ˆæœ¬ |
| `max_version` | âŒ | string | æœ€é«˜DCCç‰ˆæœ¬ |

### ğŸ·ï¸ æ”¯æŒçš„æ ‡ç­¾

| æ ‡ç­¾ | è¯´æ˜ |
|------|------|
| `modeling` | å»ºæ¨¡å·¥å…· |
| `animation` | åŠ¨ç”»å·¥å…· |
| `rigging` | ç»‘å®šå·¥å…· |
| `io` | å¯¼å…¥å¯¼å‡º |
| `utility` | é€šç”¨å·¥å…· |

---

## æ’ä»¶ä»£ç è§„èŒƒ

### ğŸ”§ å¿…é¡»å®ç°çš„å…ƒç´ 

#### 1. æ¨¡å—çº§å¸¸é‡

```python
PLUGIN_NAME = "å·¥å…·åç§°"
PLUGIN_VERSION = "1.0.0"
PLUGIN_TYPE = "dcc"  # æˆ– ue_engine, other
PLUGIN_DESCRIPTION = "å·¥å…·æè¿°"
PLUGIN_AUTHOR = "ä½œè€…å"
```

#### 2. ä¸»ç±»ç»“æ„

```python
class YourPluginName:
    """æ’ä»¶ä¸»ç±»"""
    
    # ç±»çº§å¸¸é‡ï¼ˆå¤åˆ¶æ¨¡å—å¸¸é‡ï¼‰
    PLUGIN_NAME = PLUGIN_NAME
    PLUGIN_VERSION = PLUGIN_VERSION
    PLUGIN_TYPE = PLUGIN_TYPE
    PLUGIN_DESCRIPTION = PLUGIN_DESCRIPTION
    PLUGIN_AUTHOR = PLUGIN_AUTHOR
    
    def __init__(self):
        self._connected = False
        self._setup_logging()
    
    def execute(self, **kwargs) -> Dict[str, Any]:
        """ä¸»æ‰§è¡Œæ–¹æ³• - å¿…é¡»å®ç°"""
        pass
    
    def get_info(self) -> Dict[str, Any]:
        """è¿”å›æ’ä»¶ä¿¡æ¯ - å¿…é¡»å®ç°"""
        pass
```

### ğŸ“¤ è¿”å›å€¼æ ¼å¼

æ‰€æœ‰ `execute()` æ–¹æ³•å¿…é¡»è¿”å›ç»Ÿä¸€æ ¼å¼çš„å­—å…¸ï¼š

```python
# æˆåŠŸè¿”å›
{
    "status": "success",
    "result": <ä»»æ„æ•°æ®>,
    "message": "æ‰§è¡ŒæˆåŠŸçš„æè¿°"
}

# å¤±è´¥è¿”å›
{
    "status": "error",
    "message": "é”™è¯¯æè¿°ä¿¡æ¯"
}
```

---

## æ‰§è¡Œæ¨¡å¼è¯´æ˜

### ğŸ–¥ï¸ ç‹¬ç«‹æ¨¡å¼ (standalone)

é€‚ç”¨äºä¸ä¾èµ–DCCè½¯ä»¶çš„é€šç”¨å·¥å…·ï¼š

```python
def execute(self, **kwargs) -> Dict[str, Any]:
    try:
        # ç›´æ¥æ‰§è¡ŒPythoné€»è¾‘
        result = self._do_work(kwargs)
        return {"status": "success", "result": result}
    except Exception as e:
        return {"status": "error", "message": str(e)}
```

### ğŸ”— DCCæ¨¡å¼

éœ€è¦è¿æ¥åˆ°DCCè½¯ä»¶æ‰§è¡Œï¼š

```python
def execute(self, **kwargs) -> Dict[str, Any]:
    try:
        # 1. æ£€æŸ¥è¿æ¥
        if not self._connected:
            if not self.connect_to_dcc():
                return {"status": "error", "message": "æ— æ³•è¿æ¥DCC"}
        
        # 2. æ‰§è¡ŒDCCç›¸å…³æ“ä½œ
        result = self._dcc_operation()
        
        return {"status": "success", "result": result}
    except Exception as e:
        return {"status": "error", "message": str(e)}
```

---

## DCCé€šä¿¡æ¥å£

### ğŸ”Œ é€šä¿¡åè®®

| DCC | ç«¯å£ | åè®® | è¯´æ˜ |
|-----|------|------|------|
| Maya | 7001 | TCP Socket | å‘é€Pythonä»£ç æ‰§è¡Œ |
| 3ds Max | 7002 | TCP Socket | å‘é€Pythonä»£ç æ‰§è¡Œ |
| Blender | 7003 | TCP Socket | å‘é€Pythonä»£ç æ‰§è¡Œ |
| Unreal Engine | 30010 | HTTP | Remote Executionæ’ä»¶ |

### ğŸ“¡ Maya/Max/Blender é€šä¿¡

æ¡†æ¶ä¼šå°† `plugin.py` çš„ä»£ç å‘é€åˆ°DCCæ‰§è¡Œï¼š

```python
# æ¡†æ¶ç”Ÿæˆçš„æ‰§è¡Œä»£ç æ¨¡æ¿
import sys
sys.path.insert(0, r'{plugin_path}')

# æ‰§è¡Œæ’ä»¶ä»£ç 
exec(open(r'{plugin_file}').read())

# è°ƒç”¨å…¥å£å‡½æ•°
result = run_in_maya()  # æˆ–å¯¹åº”DCCçš„å…¥å£å‡½æ•°
print(result)
```

### ğŸ“¡ Unreal Engine é€šä¿¡

UEä½¿ç”¨HTTPåè®®ï¼Œæ¡†æ¶å‘é€ä»£ç åˆ°Remote Executionï¼š

```python
# æ’ä»¶éœ€è¦æä¾› run_in_unreal() å‡½æ•°
def run_in_unreal():
    """UEæ‰§è¡Œå…¥å£"""
    plugin = YourPlugin()
    result = plugin.execute()
    return result
```

---

## è‡ªåŠ¨åŒ–é›†æˆ

### âš™ï¸ è‡ªåŠ¨åŒ–æ‰§è¡Œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AutomationTask  â”‚
â”‚ (è§¦å‘å™¨è§¦å‘)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ execute_callbackâ”‚
â”‚ (æ‰§è¡Œå›è°ƒ)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ æ¨¡å¼åˆ¤æ–­ â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
  â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
  â–¼      â–¼      â–¼
ç‹¬ç«‹   Maya    UE
æ¨¡å¼   æ‰§è¡Œ    æ‰§è¡Œ
```

### ğŸ“‹ è‡ªåŠ¨åŒ–å›è°ƒæ¥å£

æ¡†æ¶è°ƒç”¨æ’ä»¶æ—¶çš„å›è°ƒç­¾åï¼š

```python
def execute_callback(
    tool_id: str,      # å·¥å…·ID
    category: str,     # å·¥å…·åˆ†ç±»
    mode: str,         # æ‰§è¡Œæ¨¡å¼: standalone/dcc
    params: dict       # æ‰§è¡Œå‚æ•°
) -> dict:
    """
    Returns:
        {"status": "success/error", ...}
    """
```

### ğŸ“¤ DCCæ‰§è¡Œè¿”å›å€¼

DCCæ‰§è¡Œåè¿”å›ä¸‰å…ƒç»„ï¼š

```python
# Mayaè¿”å›
(success: bool, message: str, output: str)

# UEè¿”å›
(success: bool, message: str, output: str)
```

**output** å­—æ®µåŒ…å«DCCä¸­çš„printè¾“å‡ºï¼Œä¼šæ˜¾ç¤ºåœ¨GUIæ—¥å¿—ä¸­ã€‚

---

## å®Œæ•´ç¤ºä¾‹

### ğŸ¯ UEæ’ä»¶å®Œæ•´ç¤ºä¾‹

```python
"""
Unreal Engineç¤ºä¾‹æ’ä»¶ - æ‰“å°é€‰æ‹©çš„èµ„äº§
"""

import logging
from typing import Dict, Any, List

logger = logging.getLogger(__name__)

# ============ æ¨¡å—çº§å¸¸é‡ï¼ˆå¿…é¡»ï¼‰ ============
PLUGIN_NAME = "UEæ‰“å°é€‰æ‹©"
PLUGIN_VERSION = "1.0.0"
PLUGIN_TYPE = "ue_engine"
PLUGIN_DESCRIPTION = "è·å–UEä¸­é€‰æ‹©çš„èµ„äº§å¹¶æ‰“å°"
PLUGIN_AUTHOR = "Your Name"


class PrintSelection:
    """UEæ‰“å°é€‰æ‹©èµ„äº§å·¥å…·"""
    
    # ç±»çº§å¸¸é‡
    PLUGIN_NAME = PLUGIN_NAME
    PLUGIN_VERSION = PLUGIN_VERSION
    PLUGIN_TYPE = PLUGIN_TYPE
    PLUGIN_DESCRIPTION = PLUGIN_DESCRIPTION
    PLUGIN_AUTHOR = PLUGIN_AUTHOR
    
    def __init__(self):
        self._connected = False
        self._setup_logging()
    
    def _setup_logging(self):
        """è®¾ç½®æ—¥å¿—"""
        if not logger.handlers:
            handler = logging.StreamHandler()
            handler.setFormatter(logging.Formatter(
                '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
            ))
            logger.addHandler(handler)
            logger.setLevel(logging.INFO)
    
    def connect_to_dcc(self) -> bool:
        """è¿æ¥åˆ°UE"""
        try:
            import unreal
            self._connected = True
            return True
        except ImportError:
            return False
    
    def disconnect_from_dcc(self):
        """æ–­å¼€è¿æ¥"""
        self._connected = False
    
    def execute(self, **kwargs) -> Dict[str, Any]:
        """æ‰§è¡Œä¸»åŠŸèƒ½"""
        try:
            if not self._connected:
                self.connect_to_dcc()
            
            selected = self.get_selection()
            
            # æ‰“å°è¾“å‡ºï¼ˆä¼šè¿”å›åˆ°GUIæ—¥å¿—ï¼‰
            print(f"é€‰æ‹©çš„èµ„äº§æ•°é‡: {len(selected)}")
            for name in selected:
                print(f"  - {name}")
            
            return {
                "status": "success",
                "result": selected,
                "count": len(selected)
            }
        except Exception as e:
            return {"status": "error", "message": str(e)}
    
    def get_selection(self) -> List[str]:
        """è·å–é€‰æ‹©çš„èµ„äº§"""
        if self._connected:
            import unreal
            selected = unreal.EditorUtilityLibrary.get_selected_assets()
            return [asset.get_name() for asset in selected]
        return []
    
    def get_info(self) -> Dict[str, Any]:
        """è¿”å›æ’ä»¶ä¿¡æ¯"""
        return {
            "name": self.PLUGIN_NAME,
            "version": self.PLUGIN_VERSION,
            "type": self.PLUGIN_TYPE,
            "description": self.PLUGIN_DESCRIPTION
        }
    
    def validate_parameters(self, params: Dict[str, Any]) -> Dict[str, Any]:
        """éªŒè¯å‚æ•°"""
        return params


# ============ UEæ‰§è¡Œå…¥å£ï¼ˆå¿…é¡»ï¼‰ ============
def run_in_unreal():
    """UEç›´æ¥æ‰§è¡Œå…¥å£"""
    plugin = PrintSelection()
    return plugin.execute()


# ============ è‡ªåŠ¨æ‰§è¡Œæ£€æµ‹ ============
def _is_in_unreal():
    try:
        import unreal
        return True
    except ImportError:
        return False


if _is_in_unreal():
    run_in_unreal()
elif __name__ == "__main__":
    # æœ¬åœ°æµ‹è¯•
    plugin = PrintSelection()
    print(plugin.execute())
```

---

## å¸¸è§é—®é¢˜

### â“ Q: æ’ä»¶åœ¨GUIä¸­ä¸æ˜¾ç¤ºï¼Ÿ

æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š
1. `config.json` æ ¼å¼æ˜¯å¦æ­£ç¡®
2. æ’ä»¶ç›®å½•æ˜¯å¦åœ¨æ­£ç¡®ä½ç½®
3. `plugin.py` æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯

### â“ Q: DCCæ‰§è¡Œæ— è¾“å‡ºï¼Ÿ

ç¡®ä¿åœ¨æ’ä»¶ä¸­ä½¿ç”¨ `print()` è¾“å‡ºä¿¡æ¯ï¼š

```python
def execute(self, **kwargs):
    # è¿™äº›printä¼šè¿”å›åˆ°GUI
    print("å¼€å§‹æ‰§è¡Œ...")
    print(f"å¤„ç†ç»“æœ: {result}")
```

### â“ Q: è‡ªåŠ¨åŒ–ä»»åŠ¡ä¸æ‰§è¡Œï¼Ÿ

1. æ£€æŸ¥ä»»åŠ¡æ˜¯å¦å·²å¯ç”¨
2. æ£€æŸ¥DCCè½¯ä»¶æ˜¯å¦å·²è¿æ¥
3. æŸ¥çœ‹GUIæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0.0 | æœ€åæ›´æ–°: 2026-02-16*
